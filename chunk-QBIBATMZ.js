import{Aa as d,Ga as p,Ha as o,Ia as r,Ja as k,Ka as u,La as x,Ma as s,Na as _,Oa as l,Pa as S,Q as m,Qa as b,R as g,S as y,Sa as h,aa as f,ba as w,db as B,eb as T,fb as F,ma as c,xa as C}from"./chunk-CZMHPH5U.js";function A(n,t){if(n&1){let e=u();o(0,"button",7),x("click",function(){let a=m(e).$implicit,v=s();return g(v.selectedCategory.set(a))}),l(1),r()}if(n&2){let e=t.$implicit,i=s();_("bg-rose-600",i.selectedCategory()===e)("text-white",i.selectedCategory()===e)("bg-white",i.selectedCategory()!==e)("text-gray-700",i.selectedCategory()!==e),c(),b(" ",e," ")}}function E(n,t){n&1&&(o(0,"div",12),y(),o(1,"svg",13),k(2,"path",14),r()())}function D(n,t){if(n&1){let e=u();o(0,"div",8),x("click",function(){let a=m(e).$implicit,v=s();return g(v.toggleService(a))}),o(1,"div")(2,"h3",9),l(3),r(),o(4,"p",10),l(5),r()(),d(6,E,3,0,"div",11),r()}if(n&2){let e=t.$implicit,i=s();_("border-rose-500",i.isSelected(e)),c(3),S(e.name),c(2),b("",e.price," TJS"),c(),p("ngIf",i.isSelected(e))}}function I(n,t){if(n&1){let e=u();o(0,"div",15)(1,"button",16),x("click",function(){m(e);let a=s();return g(a.confirmBooking())}),o(2,"span"),l(3,"Confirm Booking"),r(),o(4,"span"),l(5),r()()()}if(n&2){let e=s();c(5),b("",e.totalPrice()," TJS")}}var M=class n{categories=["All","Laser","Botox","Facials"];selectedCategory=f("All");services=f([{id:"1",name:"Full Face Laser",category:"Laser",price:250},{id:"2",name:"Underarms Laser",category:"Laser",price:100},{id:"3",name:"Botox Forehead",category:"Botox",price:1200},{id:"4",name:"HydraFacial",category:"Facials",price:400}]);cart=f([]);filteredServices=h(()=>{let t=this.selectedCategory();return t==="All"?this.services():this.services().filter(e=>e.category===t)});totalPrice=h(()=>this.cart().reduce((t,e)=>t+e.price,0));constructor(){w(()=>{typeof Telegram<"u"&&Telegram.WebApp&&(this.cart().length>0?(Telegram.WebApp.MainButton.setText(`PAY ${this.totalPrice()} TJS`),Telegram.WebApp.MainButton.show(),Telegram.WebApp.MainButton.onClick(this.confirmBooking.bind(this))):Telegram.WebApp.MainButton.hide())})}toggleService(t){this.cart.update(e=>e.find(a=>a.id===t.id)?e.filter(a=>a.id!==t.id):[...e,t])}isSelected(t){return this.cart().some(e=>e.id===t.id)}confirmBooking(){let t={items:this.cart(),total:this.totalPrice()};typeof Telegram<"u"&&Telegram.WebApp?Telegram.WebApp.sendData(JSON.stringify(t)):(console.log("Sending data to bot:",t),alert("Data sent! (Check console)"))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-booking"]],decls:8,vars:3,consts:[[1,"p-4","bg-gray-50","min-h-screen","pb-24"],[1,"text-2xl","font-bold","text-rose-700","mb-4"],[1,"flex","gap-2","overflow-x-auto","mb-6","pb-2"],["class","px-4 py-2 rounded-full shadow-sm whitespace-nowrap transition-colors",3,"bg-rose-600","text-white","bg-white","text-gray-700","click",4,"ngFor","ngForOf"],[1,"space-y-3"],["class","bg-white p-4 rounded-xl shadow-sm border-2 border-transparent transition-all cursor-pointer flex justify-between items-center",3,"border-rose-500","click",4,"ngFor","ngForOf"],["class","fixed bottom-4 left-4 right-4",4,"ngIf"],[1,"px-4","py-2","rounded-full","shadow-sm","whitespace-nowrap","transition-colors",3,"click"],[1,"bg-white","p-4","rounded-xl","shadow-sm","border-2","border-transparent","transition-all","cursor-pointer","flex","justify-between","items-center",3,"click"],[1,"font-semibold","text-gray-800"],[1,"text-rose-600","font-medium"],["class","text-rose-600",4,"ngIf"],[1,"text-rose-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"fixed","bottom-4","left-4","right-4"],[1,"w-full","bg-rose-600","text-white","py-4","rounded-xl","font-bold","shadow-lg","flex","justify-between","px-6","items-center",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h1",1),l(2,"Select Services"),r(),o(3,"div",2),d(4,A,2,9,"button",3),r(),o(5,"div",4),d(6,D,7,5,"div",5),r(),d(7,I,6,1,"div",6),r()),e&2&&(c(4),p("ngForOf",i.categories),c(2),p("ngForOf",i.filteredServices()),c(),p("ngIf",i.cart().length>0))},dependencies:[F,B,T],encapsulation:2})};export{M as BookingComponent};
