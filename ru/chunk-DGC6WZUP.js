import{$a as o,Ia as T,Pb as M,S as d,Sa as b,T as m,Ta as x,U as h,Ua as w,Va as E,Wa as v,ab as r,bb as N,cb as u,da as g,eb as S,fa as k,gb as _,hb as s,mb as y,nb as p,ob as B,pb as f,va as c,yb as C}from"./chunk-SUHW4BGF.js";var A=(n,t)=>t.id;function O(n,t){if(n&1){let e=u();o(0,"button",9),_("click",function(){let a=d(e).$implicit,l=s();return m(l.selectedCategory.set(a));}),p(1),r();}if(n&2){let e=t.$implicit,i=s();y("bg-rose-600",i.selectedCategory()===e)("text-white",i.selectedCategory()===e)("bg-white",i.selectedCategory()!==e)("text-gray-700",i.selectedCategory()!==e),c(),f(" ",e," ");}}function I(n,t){n&1&&(o(0,"div",13),h(),o(1,"svg",14),N(2,"path",15),r()());}function D(n,t){if(n&1){let e=u();o(0,"div",10),_("click",function(){let a=d(e).$implicit,l=s();return m(l.toggleService(a));})("keydown.enter",function(){let a=d(e).$implicit,l=s();return m(l.toggleService(a));}),o(1,"div")(2,"h3",11),p(3),r(),o(4,"p",12),p(5),r()(),b(6,I,3,0,"div",13),r();}if(n&2){let e=t.$implicit,i=s();y("border-rose-500",i.isSelected(e)),c(3),B(e.name),c(2),f("",e.price," TJS"),c(),x(i.isSelected(e)?6:-1);}}function $(n,t){if(n&1){let e=u();o(0,"div",8)(1,"button",16),_("click",function(){d(e);let a=s();return m(a.confirmBooking());}),o(2,"span"),S(3,1),r(),o(4,"span"),p(5),r()()();}if(n&2){let e=s();c(5),f("",e.totalPrice()," TJS");}}var P=class n{categories=["\u0412\u0441\u0435","\u041B\u0430\u0437\u0435\u0440","\u0411\u043E\u0442\u043E\u043A\u0441","\u0423\u0445\u043E\u0434 \u0437\u0430 \u043B\u0438\u0446\u043E\u043C"];selectedCategory=g("\u0412\u0441\u0435");services=g([{id:"1",name:"\u041B\u0430\u0437\u0435\u0440 \u0432\u0441\u0435\u0433\u043E \u043B\u0438\u0446\u0430",category:"\u041B\u0430\u0437\u0435\u0440",price:250},{id:"2",name:"\u041B\u0430\u0437\u0435\u0440 \u043F\u043E\u0434\u043C\u044B\u0448\u0435\u043A",category:"\u041B\u0430\u0437\u0435\u0440",price:100},{id:"3",name:"\u0411\u043E\u0442\u043E\u043A\u0441 \u043B\u0431\u0430",category:"\u0411\u043E\u0442\u043E\u043A\u0441",price:1200},{id:"4",name:"\u0427\u0438\u0441\u0442\u043A\u0430 HydraFacial",category:"\u0423\u0445\u043E\u0434 \u0437\u0430 \u043B\u0438\u0446\u043E\u043C",price:400}]);cart=g([]);selectedIds=C(()=>new Set(this.cart().map(t=>t.id)));filteredServices=C(()=>{let t=this.selectedCategory();return t==="\u0412\u0441\u0435"?this.services():this.services().filter(e=>e.category===t);});totalPrice=C(()=>this.cart().reduce((t,e)=>t+e.price,0));confirmBookingCallback=this.confirmBooking.bind(this);constructor(){k(()=>{typeof Telegram<"u"&&Telegram.WebApp&&(this.cart().length>0?(Telegram.WebApp.MainButton.setText("\u041E\u041F\u041B\u0410\u0422\u0418\u0422\u042C "+this.totalPrice()+" TJS"),Telegram.WebApp.MainButton.show()):Telegram.WebApp.MainButton.hide());});}ngOnInit(){typeof Telegram<"u"&&Telegram.WebApp&&Telegram.WebApp.MainButton.onClick(this.confirmBookingCallback);}ngOnDestroy(){typeof Telegram<"u"&&Telegram.WebApp&&(Telegram.WebApp.MainButton.offClick(this.confirmBookingCallback),Telegram.WebApp.MainButton.hide());}toggleService(t){this.cart.update(e=>e.find(a=>a.id===t.id)?e.filter(a=>a.id!==t.id):[...e,t]);}isSelected(t){return this.selectedIds().has(t.id);}confirmBooking(){let t={items:this.cart(),total:this.totalPrice()};typeof Telegram<"u"&&Telegram.WebApp?Telegram.WebApp.sendData(JSON.stringify(t)):(console.log("Sending data to bot:",t),alert("Data sent! (Check console)"));}static ɵfac=function(e){return new(e||n)();};static ɵcmp=T({type:n,selectors:[["app-booking"]],decls:10,vars:1,consts:()=>{let t;t="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0441\u043B\u0443\u0433\u0438";let e;return e="\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u044C",[t,e,[1,"p-4","bg-gray-50","min-h-screen","pb-24"],[1,"text-2xl","font-bold","text-rose-700","mb-4"],[1,"flex","gap-2","overflow-x-auto","mb-6","pb-2"],[1,"px-4","py-2","rounded-full","shadow-sm","whitespace-nowrap","transition-colors",3,"bg-rose-600","text-white","bg-white","text-gray-700"],[1,"space-y-3"],["tabindex","0",1,"bg-white","p-4","rounded-xl","shadow-sm","border-2","border-transparent","transition-all","cursor-pointer","flex","justify-between","items-center","outline-none","focus:ring-2","focus:ring-rose-500",3,"border-rose-500"],[1,"fixed","bottom-4","left-4","right-4"],[1,"px-4","py-2","rounded-full","shadow-sm","whitespace-nowrap","transition-colors",3,"click"],["tabindex","0",1,"bg-white","p-4","rounded-xl","shadow-sm","border-2","border-transparent","transition-all","cursor-pointer","flex","justify-between","items-center","outline-none","focus:ring-2","focus:ring-rose-500",3,"click","keydown.enter"],[1,"font-semibold","text-gray-800"],[1,"text-rose-600","font-medium"],[1,"text-rose-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"w-full","bg-rose-600","text-white","py-4","rounded-xl","font-bold","shadow-lg","flex","justify-between","px-6","items-center",3,"click"]];},template:function(e,i){e&1&&(o(0,"div",2)(1,"h1",3),S(2,0),r(),o(3,"div",4),E(4,O,2,9,"button",5,w),r(),o(6,"div",6),E(7,D,7,5,"div",7,A),r(),b(9,$,6,1,"div",8),r()),e&2&&(c(4),v(i.categories),c(3),v(i.filteredServices()),c(2),x(i.cart().length>0?9:-1));},dependencies:[M],encapsulation:2});};export{P as BookingComponent};/**i18n:b82b23be7f7338acfddc6e87193068a65d480bfebda2e4ddab7b7ca5af6f2821*/